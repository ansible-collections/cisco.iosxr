---
- ansible.builtin.debug:
    msg: START cli/cli_command.yaml on connection={{ ansible_connection }}

- name: Get output for single command
  register: result
  ansible.netcommon.cli_command:
    command: show version

- ansible.builtin.assert:
    that:
      - result.changed == false
      - result.stdout is defined

- name: Send invalid command
  register: result
  ignore_errors: true
  ansible.netcommon.cli_command:
    command: show foo

- ansible.builtin.assert:
    that:
      - result.failed == true
      - result.msg is defined

- name: Delete configuration file on disk to prevent failure of copy task for duplicate
  ignore_errors: true
  ansible.netcommon.cli_command:
    command: delete harddisk:ansible_tmp.txt
    prompt: Delete harddisk\:/?ansible_tmp\.txt\[confirm\]
    answer: ""

- name: Run command with prompt
  register: result
  ansible.netcommon.cli_command:
    command: copy running-config harddisk:ansible_tmp.txt
    prompt: "Destination file name \\(control-c to abort\\)\\: \\[\\/ansible_tmp.txt\\]\\?"
    answer: ansible_tmp.txt

- ansible.builtin.assert:
    that:
      - result.stdout is defined
      - "'ansible_tmp' in result.stdout"

- ansible.builtin.debug: msg="END cli/cli_command.yaml on connection={{ ansible_connection }}"
